/*! mudHowlers - v0.1.0 - 2015-03-28 */angular.module("mudHowlers").directive("getContent",["$firebase","$window","$state",function(a,b){return{restrict:"A",scope:!1,link:function(c,d,e){c.end=0,c.start=0,c.isLoading=!0,c.canScroll=!0;var f="https://mudhowlers.firebaseio.com/posts/";c.posts=[],c.postsArray=[],c.landscapeSizes=[{height:"618px"},{height:"410px"},{height:"305px"},{height:"200px"}],c.portraitSizes=[{height:"931px"},{height:"696px"},{height:"460px"}],c.socialSizes=[{height:"615px"},{height:"460px"},{height:"302px"},{height:"226px"}],angular.element(b).bind("scroll",function(){var a="innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,b=document.body,d=document.documentElement,e=Math.max(b.scrollHeight,b.offsetHeight,d.clientHeight,d.scrollHeight,d.offsetHeight);windowBottom=a+window.pageYOffset,windowBottom>=e&&(c.start>0&&c.end>0?(c.end-=2,c.start=c.end-1,c.getData()):0==c.start&&1==c.end&&c.$apply(function(){c.canScroll=!1}))}),c.getTotal=function(){var b=a(new Firebase("https://mudhowlers.firebaseio.com/postsCounter/")).$asObject();b.$loaded().then(function(a){c.end=a.$value-1,c.start=c.end-1,c.getData()})},c.getData=function(){c.postsArray=[],c.posts=[];var b;b=new Firebase(f).startAt(c.start).endAt(c.end).limitToFirst(2),c.postsArray=a(b).$asArray(),c.postsArray.$loaded().then(function(a){angular.forEach(a,function(a){a.section==e.getContent&&c.posts.push(a)}),c.displayData(),c.postsArray.$destroy()})},c.displayData=function(){c.isLoading=!1,c.posts.reverse(),angular.forEach(c.posts,function(a){if(d.append("<div class='newPost'></div>"),c.surrogateObj=a,c.element=angular.element(document.getElementsByClassName("newPost")),"Video"==c.surrogateObj.contentType)c.element.addClass("post"),c.element.addClass("sixteen columns"),c.element.css({"margin-bottom":"10px",height:"552px","float":"left"}),c.element.append("<iframe width='100%' height='100%' src='http://www.youtube.com/embed/"+c.surrogateObj.content+"'></iframe>");else{var b=c.surrogateObj.heriarchy,e=c.surrogateObj.contentType;switch(c.element.addClass("post"),c.surrogateObj.contentPresentation){case"Landscape":1==b&&c.element.addClass("sixteen columns"),2==b&&c.element.addClass("two-thirds column"),3==b&&c.element.addClass("eight columns"),4==b&&c.element.addClass("one-third column"),"Imagen"==e?(c.element.css({"margin-bottom":"10px",height:c.landscapeSizes[b-1].height,"background-image":"url("+c.surrogateObj.content+")","background-position":"center center","background-size":"cover","z-index":"-1","float":"left",position:"relative"}),c.element.append("<div class='hoverBlock'></div>"),c.element.append("<h1 class='image-title'>"+c.surrogateObj.title+"</h1>"),c.element.append("<p class='image-author'> <span>Posted by</span><br>"+c.surrogateObj.author+"</p>"),c.element.append("<p class='image-date'> <span>Date</span><br> "+c.surrogateObj.dateDay+"."+c.surrogateObj.dateMonth+"."+c.surrogateObj.dateYear+"</p>")):"Texto"==e&&(c.element.css({"margin-bottom":"10px",height:c.landscapeSizes[b-1].height,"z-index":"-1","float":"left",position:"relative"}),c.element.append("<h1 class='post-title'>"+c.surrogateObj.title+"</h1>"),c.element.append("<p class='post-content'>"+c.surrogateObj.content+"</p>"),c.element.append("<p class='post-author'> <span>Posted by</span><br>"+c.surrogateObj.author+"</p>"),c.element.append("<p class='post-date'> <span>Date</span><br> "+c.surrogateObj.dateDay+"."+c.surrogateObj.dateMonth+"."+c.surrogateObj.dateYear+"</p>"));break;case"Portrait":1==b&&c.element.addClass("two-thirds column"),2==b&&c.element.addClass("eight columns"),3==b&&c.element.addClass("one-third column"),"Imagen"==e?(c.element.css({"margin-bottom":"10px",height:c.portraitSizes[b-1].height,"background-image":"url("+c.surrogateObj.content+")","background-position":"center center","background-size":"cover","z-index":"-1","float":"left",position:"relative"}),c.element.append("<div class='hoverBlock'></div>"),c.element.append("<h1 class='image-title'>"+c.surrogateObj.title+"</h1>"),c.element.append("<p class='image-author'> <span>Posted by</span><br>"+c.surrogateObj.author+"</p>"),c.element.append("<p class='image-date'> <span>Date</span><br> "+c.surrogateObj.dateDay+"."+c.surrogateObj.dateMonth+"."+c.surrogateObj.dateYear+"</p>")):"Texto"==e&&(c.element.css({"margin-bottom":"10px",height:c.portraitSizes[b-1].height,"z-index":"-1","float":"left",position:"relative"}),c.element.append("<h1 class='post-title'>"+c.surrogateObj.title+"</h1>"),c.element.append("<p class='post-content'>"+c.surrogateObj.content+"</p>"),c.element.append("<p class='post-author'> <span>Posted by</span><br>"+c.surrogateObj.author+"</p>"),c.element.append("<p class='post-date'> <span>Date</span><br> "+c.surrogateObj.dateDay+"."+c.surrogateObj.dateMonth+"."+c.surrogateObj.dateYear+"</p>"));break;case"Social":1==b&&c.element.addClass("two-thirds column"),2==b&&c.element.addClass("eight columns"),3==b&&c.element.addClass("one-third column"),4==b&&c.element.addClass("four columns"),"Imagen"==e?(c.element.css({"margin-bottom":"10px",height:c.socialSizes[b-1].height,"background-image":"url("+c.surrogateObj.content+")","background-position":"center center","background-size":"cover","z-index":"-1","float":"left",position:"relative"}),c.element.append("<div class='hoverBlock'></div>"),c.element.append("<h1 class='image-title'>"+c.surrogateObj.title+"</h1>"),c.element.append("<p class='image-author'> <span>Posted by</span><br>"+c.surrogateObj.author+"</p>"),c.element.append("<p class='image-date'> <span>Date</span><br> "+c.surrogateObj.dateDay+"."+c.surrogateObj.dateMonth+"."+c.surrogateObj.dateYear+"</p>")):"Texto"==e&&(c.element.css({"margin-bottom":"10px",height:c.socialSizes[b-1].height,"z-index":"-1","float":"left",position:"relative"}),c.element.append("<h1 class='post-title'>"+c.surrogateObj.title+"</h1>"),c.element.append("<p class='post-content'>"+c.surrogateObj.content+"</p>"),c.element.append("<p class='post-author'> <span>Posted by</span><br>"+c.surrogateObj.author+"</p>"),c.element.append("<p class='post-date'> <span>Date</span><br> "+c.surrogateObj.dateDay+"."+c.surrogateObj.dateMonth+"."+c.surrogateObj.dateYear+"</p>"))}}c.element.removeClass("newPost")})},c.getTotal()}}}]);